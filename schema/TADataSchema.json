{
  "openapi": "3.0.0",
  "info": {
    "title": "TA Instruments data schema",
    "version": "0.0.1",
    "description": "A schema for data exported from Trios"
  },
  "paths": {
    "/experiments": {
      "get": {
        "responses": {
          "200": {
            "description": "Testing only",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Experiment"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Number": {
        "type": "number"
      },
      "Integer": {
        "type": "integer"
      },
      "Boolean": {
        "type": "boolean"
      },
      "DateTime": {
        "type": "string",
        "format": "date-time"
      },
      "Uuid": {
        "type": "string",
        "format": "uuid",
        "pattern": "^[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}$"
      },
      "Text": {
        "type": "string"
      },
      "Base64EncodedBytes": {
        "type": "string",
        "format": "byte"
      },
      "Unit": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "Name": {
            "type": "string"
          }
        },
        "required": [
          "Name"
        ]
      },
      "AuditLog": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/AuditLogEntry"
        }
      },
      "AuditLogEntry": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "AuditLogEntryId": {
            "$ref": "#/components/schemas/Uuid"
          },
          "Type": {
            "type": "string"
          },
          "CreatedBy": {
            "$ref": "#/components/schemas/Identity"
          },
          "CreatedOn": {
            "$ref": "#/components/schemas/DateTime"
          }
        },
        "required": [
          "AuditLogEntryId",
          "Type",
          "CreatedBy",
          "CreatedOn"
        ]
      },
      "Identity": {
        "type": "object",
        "properties": {
          "Name": {
            "type": "string"
          }
        },
        "required": [
          "Name"
        ]
      },
      "Experiment": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "AuditLog": {
            "$ref": "#/components/schemas/AuditLog"
          },
          "Operators": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Operator"
            }
          },
          "Sample": {
            "$ref": "#/components/schemas/Sample"
          },
          "Procedure": {
            "$ref": "#/components/schemas/Procedure"
          },
          "Results": {
            "$ref": "#/components/schemas/Results"
          },
          "StartTime": {
            "$ref": "#/components/schemas/DateTime"
          },
          "FinishTime": {
            "$ref": "#/components/schemas/DateTime"
          }
        },
        "required": [
          "Operators",
          "Sample",
          "Procedure",
          "Results"
        ]
      },
      "Procedure": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "Configuration": {
            "$ref": "#/components/schemas/ProcedureConfiguration"
          },
          "Name": {
            "type": "string"
          },
          "Steps": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProcedureStep"
            }
          }
        },
        "required": [
          "Steps",
          "Configuration"
        ]
      },
      "InstrumentSampleInterface": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "InitialMass": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "PanType": {
            "type": "string"
          },
          "PanMass": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "Diameter": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "Gap": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "LoadingGap": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "TrimGapOffset": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "Material": {
            "type": "string"
          },
          "SecondaryMaterial": {
            "type": "string"
          },
          "EnvironmentalSystem": {
            "type": "string"
          },
          "SurfaceFinish": {
            "type": "string"
          },
          "SerialNumber": {
            "type": "string"
          },
          "SolventTrap": {
            "type": "boolean"
          },
          "ExpansionCoefficient": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "ExpansionCoefficientEnabled": {
            "type": "boolean"
          },
          "Compliance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "GeometryInertia": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "Friction": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "FrictionCorrectionEnabled": {
            "type": "boolean"
          },
          "StressConstant": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "StrainConstant": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "NormalStressConstant": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "FluidDensityConstant": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "PanNumber": {
            "type": "number"
          }
        }
      },
      "Sample": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "Name": {
            "type": "string"
          },
          "UserDefinedProperties": {
            "$ref": "#/components/schemas/UserDefinedProperties"
          },
          "Notes": {
            "$ref": "#/components/schemas/Notes"
          },
          "FluidDensity": {
            "type": "number"
          },
          "InitialMass": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "PoissonsRatio": {
            "$ref": "#/components/schemas/NumericValue"
          }
        }
      },
      "Operator": {
        "allOf": [
          { "$ref": "#/components/schemas/Identity" },
          {
            "type": "object",
            "additionalProperties": {}
          }
        ]
      },
      "ProcedureStep": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "Name": {
            "type": "string"
          },
          "ResultsMapping": {
            "type": "object",
            "properties": {
              "StartIndex": {
                "type": "integer"
              },
              "Count": {
                "type": "integer"
              }
            },
            "required": [
              "StartIndex",
              "Count"
            ]
          }
        },
        "required": [
          "Name"
        ]
      },
      "InstrumentConfiguration": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "Name": {
            "type": "string"
          },
          "Type": {
            "type": "string"
          },
          "SerialNumber": {
            "type": "string"
          },
          "FirmwareVersion": {
            "type": "string"
          },
          "Location": {
            "type": "string"
          },
          "DisplayType": {
            "type": "string"
          },
          "FrictionCalibrationDate": {
            "$ref": "#/components/schemas/DateTime"
          },
          "ETCCameraAvailable": {
            "type": "boolean"
          },
          "Friction": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "UseStandbyTemperature": {
            "type": "boolean"
          },
          "DiscardPanInWasteBinAtEndOfTest": {
            "type": "boolean"
          },
          "EndOfTestUseStandbyTemperature": {
            "type": "boolean"
          },
          "UseDefaultCalibrations": {
            "type": "boolean"
          },
          "UnloadMaxTemperature": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "UnloadMinTemperature": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "LoadMaxTemperature": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "LoadMinTemperature": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "StopOnGasFlowError": {
            "type": "boolean"
          },
          "SampleInterval": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "SelectedHeatFlow": {
            "type": "string"
          },
          "ExothermDirection": {
            "type": "string"
          },
          "CellSerialNumber": {
            "type": "string"
          },
          "LidType": {
            "type": "string"
          },
          "Cooler": {
            "type": "string"
          },
          "LeaveCoolerOnAtEndOfSequence": {
            "type": "boolean"
          },
          "Gas2": {
            "type": "string"
          },
          "GasSelected": {
            "type": "string"
          },
          "FlowRate": {
            "type": "string"
          },
          "SecondaryPurge": {
            "type": "boolean"
          },
          "LicensedHeatFlow": {
            "type": "string"
          },
          "ModulationLicensed": {
            "type": "boolean"
          },
          "CommonIDDVersion": {
            "type": "string"
          },
          "CortexVersion": {
            "type": "string"
          },
          "DriverVersion": {
            "type": "string"
          },
          "GDMVersion": {
            "type": "string"
          },
          "TouchscreenVersion": {
            "type": "string"
          },
          "FEPVersion": {
            "type": "string"
          },
          "FEPBootloaderVersion": {
            "type": "string"
          },
          "AutoSamplerVersion": {
            "type": "string"
          },
          "AutoSamplerBootloaderVersion": {
            "type": "string"
          },
          "FCMVersion": {
            "type": "string"
          },
          "FCMBootloaderVersion": {
            "type": "string"
          },
          "IPAddress": {
            "type": "string"
          },
          "RotationalMappingDate": {
            "$ref": "#/components/schemas/DateTime"
          },
          "RotationalMappingGeometry": {
            "type": "string"
          },
          "RotationalMappingNumberOfIterations": {
            "type": "number"
          },
          "RotationalMappingType": {
            "type": "string"
          },
          "SmartSwapEnabled": {
            "type": "boolean"
          },
          "CurrentTemperatureSystemCompensation": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "CurrentTemperatureSystemOffset": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "CurrentTemperatureSystemSpan": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "GapTemperatureCompensationCalibrationDate": {
            "$ref": "#/components/schemas/DateTime"
          },
          "GapTemperatureCompensationEnabled": {
            "type": "boolean"
          },
          "NoActiveCooling": {
            "type": "boolean"
          },
          "TemperatureControlEnabled": {
            "type": "boolean"
          },
          "TemperatureSystemControl": {
            "type": "string"
          },
          "UpperTemperatureSystemFitted": {
            "type": "boolean"
          },
          "TemperatureWaitDuration": {
            "type": "string"
          },
          "TemperatureWaitTolerance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "Inertia": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "InertiaCalibrationDate": {
            "$ref": "#/components/schemas/DateTime"
          },
          "AxialForceForSampleCompression": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "ClosureDistance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "ClosureProfile": {
            "type": "string"
          },
          "ClosureVelocity": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "CoarseGapVelocity": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "FineGapVelocity": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "OtherGapVelocity": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "GapZeroMode": {
            "type": "string"
          },
          "GapHandlingAtStartOfTest": {
            "type": "string"
          },
          "GapTolerance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "GapWaitDuration": {
            "$ref": "#/components/schemas/DateTime"
          },
          "OverrideWaitForGap": {
            "type": "boolean"
          },
          "AxialForceActionOutsideRange": {
            "type": "string"
          },
          "ControlAxialForceActive": {
            "type": "boolean"
          },
          "ControlAxialForceMaxGapChangeUp": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "ControlAxialForceMinGapChangeDown": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "ControlAxialForceSensitivity": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "ControlAxialForceSetInitialValue": {
            "type": "boolean"
          },
          "ControlAxialForceType": {
            "type": "string"
          },
          "ControlledAxialForce": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "FlowCollectAllPoints": {
            "type": "boolean"
          },
          "FlowCollectNegativeShearRateData": {
            "type": "boolean"
          },
          "FlowInertiaCorrection": {
            "type": "boolean"
          },
          "FlowNonSteadyStateMinimumVelocity": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "FlowTorqueLimit": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "FlowVelocityLimit": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "FlowVelocityTolerance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "FlowZeroStrainAtStartOfStep": {
            "type": "boolean"
          },
          "OscillationDisplacementLimit": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "OscillationDisplacementTolerance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "OscillationRawPhaseLimit": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "OscillationTorqueLimit": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "OscillationTorqueTolerance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "OscillationVelocityTolerance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "ZeroAxialForceBeforeRun": {
            "type": "boolean"
          },
          "ZeroSpeedAfterPreshear": {
            "type": "string"
          },
          "ZeroVelocityThreshold": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "MaximumAxialForceLimit": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "MinimumAxialForceLimit": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "TemperatureTolerance": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "InstrumentSampleInterface": {
            "$ref": "#/components/schemas/InstrumentSampleInterface"
          },
          "InstrumentReferenceSampleInterfaces": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InstrumentSampleInterface"
            }
          },
          "Calibrations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Calibration"
            }
          }
        },
        "required": [
          "Type"
        ]
      },
      "Calibration": {
        "type": "object",
        "properties": {
          "Name": {
            "type": "string"
          },
          "DateApplied": {
            "$ref": "#/components/schemas/DateTime"
          },
          "Description": {
            "type": "string"
          },
          "GasType": {
            "type": "string"
          },
          "PanType": {
            "type": "string"
          },
          "Slope": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "Offset": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "InitialTemperature": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "DeltaTOffset": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "DeltaTSlope": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "DeltaT0Offset": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "DeltaT0Slope": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "MeasuredTemperature": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "KnownTemperature": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "T4PKCell": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "OnsetSlope": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "HeatCapacityTemperatureTable": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/HeatCapacityTemperatureRecord"
            }
          }
        },
        "required": [
          "Name"
        ]
      },
      "HeatCapacityTemperatureRecord": {
        "type": "object",
        "properties": {
          "HeatCapacity": {
            "$ref": "#/components/schemas/NumericValue"
          },
          "Temperature": {
            "$ref": "#/components/schemas/NumericValue"
          }
        }
      },
      "AccessoryConfiguration": {
        "type": "object",
        "additionalProperties": {}
      },
      "ProcedureConfiguration": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "AccesssoryConfigurations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AccessoryConfiguration"
            }
          },
          "InstrumentConfigurations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InstrumentConfiguration"
            }
          }
        }
      },
      "UserDefinedProperties": {
        "type": "object",
        "additionalProperties": {}
      },
      "Notes": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "Text": {
            "$ref": "#/components/schemas/Text"
          }
        },
        "required": [
          "Text"
        ]
      },
      "PanConfiguration": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "PanNumber": {
            "type": "integer"
          },
          "ReferencePanNumber": {
            "type": "integer"
          }
        }
      },
      "ValueType": {
        "type": "string",
        "enum": [
          "Number",
          "Integer",
          "Boolean",
          "DateTime",
          "Uuid",
          "Text",
          "Base64EncodedBytes"
        ]
      },
      "Value": {
        "anyOf": [
          { "$ref": "#/components/schemas/Number" },
          { "$ref": "#/components/schemas/Integer" },
          { "$ref": "#/components/schemas/Boolean" },
          { "$ref": "#/components/schemas/DateTime" },
          { "$ref": "#/components/schemas/Uuid" },
          { "$ref": "#/components/schemas/Text" },
          { "$ref": "#/components/schemas/Base64EncodedBytes" }
        ]
      },
      "NumericValue": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "Unit": {
            "$ref": "#/components/schemas/Unit"
          },
          "Value": {
            "$ref": "#/components/schemas/Number"
          }
        },
        "required": [
          "Unit",
          "Value"
        ]
      },
      "Results": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "ColumnHeaders": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/ColumnHeader"
            }
          },
          "Rows": {
            "$ref": "#/components/schemas/Row"
          }
        },
        "required": [
          "ColumnHeaders",
          "Rows"
        ]
      },
      "ColumnHeader": {
        "type": "object",
        "additionalProperties": {},
        "properties": {
          "DisplayName": {
            "type": "string"
          },
          "MediaType": {
            "type": "string"
          },
          "ValueType": {
            "$ref": "#/components/schemas/ValueType"
          },
          "Unit": {
            "$ref": "#/components/schemas/Unit"
          }
        },
        "required": [
          "DisplayName",
          "ValueType"
        ]
      },
      "Row": {
        "type": "array",
        "items": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/components/schemas/Value"
          }
        }
      }
    }
  }
}